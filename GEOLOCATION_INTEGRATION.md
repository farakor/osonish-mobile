# üìç –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Osonish

## –û–±–∑–æ—Ä
–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–∫–∞–∑–∞–Ω–∏—è —Ç–æ—á–Ω–æ–≥–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è –∑–∞–∫–∞–∑—á–∏–∫–∞–º–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ –¥–ª—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π.

## ‚ú® –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –î–ª—è –∑–∞–∫–∞–∑—á–∏–∫–æ–≤:
- üìç **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è** - –∫–Ω–æ–ø–∫–∞ "–ú–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ" –≤ —Ñ–æ—Ä–º–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞** –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º —á–µ—Ä–µ–∑ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úèÔ∏è **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –∞–¥—Ä–µ—Å–∞** —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)

### –î–ª—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π:
- üìè **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏** –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö –∑–∞–∫–∞–∑–æ–≤: "–¢–∞—à–∫–µ–Ω—Ç, –Æ–Ω—É—Å–∞–±–∞–¥ ‚Ä¢ 2.3 –∫–º"
- üß≠ **–î–∏—Å—Ç–∞–Ω—Ü–∏—è –≤ –¥–µ—Ç–∞–ª—å–Ω–æ–º —ç–∫—Ä–∞–Ω–µ** –∑–∞–∫–∞–∑–∞
- üìä **–£–º–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è**:
  - < 100–º: "—Ä—è–¥–æ–º"
  - < 1–∫–º: "500 –º"
  - >= 1–∫–º: "2.3 –∫–º"

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- `expo-location` - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π

### –ù–æ–≤—ã–µ –ø–æ–ª—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
```sql
ALTER TABLE orders
ADD COLUMN latitude DECIMAL(10, 8),
ADD COLUMN longitude DECIMAL(11, 8);
```

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

#### –°–µ—Ä–≤–∏—Å—ã:
- `src/services/locationService.ts` - –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
- `src/services/orderService.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏
- `src/services/supabaseClient.template.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ –ë–î

#### –¢–∏–ø—ã:
- `src/types/index.ts` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `latitude` –∏ `longitude`

#### –≠–∫—Ä–∞–Ω—ã:
- `src/screens/customer/CreateOrderScreen.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
- `src/screens/worker/WorkerJobsScreen.tsx` - –ø–æ–∫–∞–∑ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö
- `src/screens/worker/JobDetailsScreen.tsx` - –ø–æ–∫–∞–∑ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ –≤ –¥–µ—Ç–∞–ª—è—Ö

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `src/components/cards/ModernOrderCard.tsx` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:**
   ```typescript
   // –ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ "üìç –ú–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ"
   const coords = await locationService.getCurrentLocation();
   const address = await locationService.reverseGeocode(coords.latitude, coords.longitude);
   ```

2. **–í –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–∞:**
   ```typescript
   const orderData: CreateOrderRequest = {
     // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
     location: "–¢–∞—à–∫–µ–Ω—Ç, –Æ–Ω—É—Å–∞–±–∞–¥",
     latitude: 41.3775,
     longitude: 69.2407
   };
   ```

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏:

```typescript
// –í ModernOrderCard
const distance = locationService.calculateDistance(
  userLocation.latitude,
  userLocation.longitude,
  order.latitude,
  order.longitude
);
const formattedDistance = locationService.formatDistance(distance);
// –†–µ–∑—É–ª—å—Ç–∞—Ç: "2.3 –∫–º"
```

## üöÄ –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL-–º–∏–≥—Ä–∞—Ü–∏—é –≤ Supabase:

```bash
# –§–∞–π–ª: add_location_fields.sql
psql -h your-supabase-host -U postgres -d postgres -f add_location_fields.sql
```

–ò–ª–∏ —á–µ—Ä–µ–∑ Supabase Dashboard:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ SQL Editor
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `add_location_fields.sql`
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é

## üîí –†–∞–∑—Ä–µ—à–µ–Ω–∏—è

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏:

- **iOS**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `expo-location`
- **Android**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `expo-location`

–ü—Ä–∏ –æ—Ç–∫–∞–∑–µ –≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, –Ω–æ —Ä—É—á–Ω–æ–π –≤–≤–æ–¥ –∞–¥—Ä–µ—Å–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç.

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

- **–†–∞—Å—á–µ—Ç –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏**: ~0.1–º—Å (—Ñ–æ—Ä–º—É–ª–∞ –≥–∞–≤–µ—Ä—Å–∏–Ω—É—Å–æ–≤)
- **–ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ**: 1-3 —Å–µ–∫ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–µ—Ç–∏)
- **–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç**: 2-5 —Å–µ–∫ (GPS + —Å–µ—Ç—å)

## üêõ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –∏–º–µ—é—Ç fallback:
- –ù–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è ‚Üí —Ä—É—á–Ω–æ–π –≤–≤–æ–¥ –∞–¥—Ä–µ—Å–∞
- –ù–µ—Ç GPS ‚Üí —Ä—É—á–Ω–æ–π –≤–≤–æ–¥ –∞–¥—Ä–µ—Å–∞  
- –ù–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —É –∑–∞–∫–∞–∑–∞ ‚Üí –ø–æ–∫–∞–∑ —Ç–æ–ª—å–∫–æ –∞–¥—Ä–µ—Å–∞
- –ù–µ—Ç –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí –ø–æ–∫–∞–∑ –±–µ–∑ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –ö–∞—Ä—Ç–∞ —Å –≤—ã–±–æ—Ä–æ–º —Ç–æ—á–∫–∏
- [ ] –§–∏–ª—å—Ç—Ä –∑–∞–∫–∞–∑–æ–≤ –ø–æ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏
- [ ] –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –ø–æ –±–ª–∏–∑–æ—Å—Ç–∏
- [ ] Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–∫–∞–∑–∞—Ö —Ä—è–¥–æ–º
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞—Ä—Ç–∞–º–∏ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞