# üö® –†–µ—à–µ–Ω–∏–µ: "Bucket –Ω–µ –Ω–∞–π–¥–µ–Ω" (—Ö–æ—Ç—è –æ–Ω —Å–æ–∑–¥–∞–Ω)

## üîç –ü—Ä–æ–±–ª–µ–º–∞
```
LOG  [MediaService] üìã –ù–∞–π–¥–µ–Ω–æ buckets: 0
ERROR [MediaService] ‚ùå Bucket 'order-media' –ù–ï –ù–ê–ô–î–ï–ù!
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ (RLS) –≤ Supabase Storage.

## ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ (2 –º–∏–Ω—É—Ç—ã)

### –í–∞—Ä–∏–∞–Ω—Ç 1–ê: –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ (30 —Å–µ–∫—É–Ω–¥)
1. [supabase.com](https://supabase.com) ‚Üí **SQL Editor** ‚Üí **New query**
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ: `CREATE POLICY "Allow everyone to see buckets" ON storage.buckets FOR SELECT USING (true);`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1–ë: SQL —Å–∫—Ä–∏–ø—Ç (–ø–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
1. –û—Ç–∫—Ä–æ–π—Ç–µ [supabase.com](https://supabase.com) ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç
2. **SQL Editor** ‚Üí **New query**
3. **–í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ —Å–∫—Ä–∏–ø—Ç–æ–≤:**
   - `STORAGE_POLICIES_SIMPLE.sql` - –º–∏–Ω–∏–º—É–º –ø–æ–ª–∏—Ç–∏–∫ (–±—ã—Å—Ç—Ä–µ–µ)
   - `STORAGE_POLICIES_FIX.sql` - –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –ø–æ–ª–∏—Ç–∏–∫
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ, –≤—Å—Ç–∞–≤—å—Ç–µ –∏ –Ω–∞–∂–º–∏—Ç–µ **Run**
5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ UI
1. **Storage** ‚Üí **Policies**
2. **New Policy** –Ω–∞ —Ç–∞–±–ª–∏—Ü–µ `buckets`
3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
   ```
   Policy name: Allow public to view buckets
   Allowed operation: SELECT
   Target roles: public
   USING expression: true
   ```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å bucket
1. **Storage** ‚Üí —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ bucket –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ—á–Ω–æ `order-media`
2. **Settings** bucket ‚Üí **Public bucket**: ‚úÖ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω–æ

## üîß –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É

–¢–µ–ø–µ—Ä—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∫–∞–∂–µ—Ç –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏:
```
[MediaService] üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: authenticated/not authenticated
[MediaService] üì° –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å listBuckets()...
[MediaService] üîÑ –ü—Ä–æ–±—É–µ–º –ø—Ä—è–º–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ bucket...
[MediaService] üîí –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ (RLS –ø–æ–ª–∏—Ç–∏–∫–∏)
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–Ω–æ–≤–∞. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
```
[MediaService] ‚úÖ –ü—Ä—è–º–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ! Bucket —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
```
–∏–ª–∏
```
[MediaService] üìã –ù–∞–π–¥–µ–Ω–æ buckets: 1
[MediaService] ‚úÖ Bucket 'order-media' –Ω–∞–π–¥–µ–Ω!
```

## üÜò –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç

–í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ Storage:
```typescript
// –í src/services/mediaService.ts
private readonly ENABLE_STORAGE = false;
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏. 