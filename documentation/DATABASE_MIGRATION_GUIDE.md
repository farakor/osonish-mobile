# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –≤ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ä–µ–¥—É

## üéØ –¶–µ–ª—å
–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø—Ä–æ–¥–∞–∫—à–µ–Ω Supabase –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ

–ò–∑ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–∞ –≤—ã—è–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–∫–ª–∏–µ–Ω—Ç—ã –∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏)
- `orders` - –∑–∞–∫–∞–∑—ã
- `applicants` - –∑–∞—è–≤–∫–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –Ω–∞ –∑–∞–∫–∞–∑—ã
- `notifications` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `scheduled_reminders` - –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- `reviews` - –æ—Ç–∑—ã–≤—ã
- `review_moderation` - –º–æ–¥–µ—Ä–∞—Ü–∏—è –æ—Ç–∑—ã–≤–æ–≤
- `call_logs` - –ª–æ–≥–∏ –∑–≤–æ–Ω–∫–æ–≤
- `pending_ratings` - –æ–∂–∏–¥–∞—é—â–∏–µ –æ—Ü–µ–Ω–∫–∏
- `admin_users` - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã
- `admin_sessions` - —Å–µ—Å—Å–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

## üöÄ –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ Supabase Dashboard (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –®–∞–≥ 1: –≠–∫—Å–ø–æ—Ä—Ç –∏–∑ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

1. –ó–∞–π–¥–∏—Ç–µ –≤ –≤–∞—à **–ø—Ä–æ–¥–∞–∫—à–µ–Ω –ø—Ä–æ–µ–∫—Ç** Supabase
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings ‚Üí Database**
3. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **Database backups**
4. –ù–∞–∂–º–∏—Ç–µ **Download backup** –∏–ª–∏ **Create backup**
5. –°–∫–∞—á–∞–π—Ç–µ `.sql` —Ñ–∞–π–ª —Å –ø–æ–ª–Ω—ã–º –¥–∞–º–ø–æ–º

### –®–∞–≥ 2: –ò–º–ø–æ—Ä—Ç –≤ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ä–µ–¥—É

1. –ó–∞–π–¥–∏—Ç–µ –≤ –≤–∞—à **—Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç** Supabase (`ruuseponrzonvyyqpdsc`)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **SQL Editor**
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
4. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π `.sql` —Ñ–∞–π–ª –∏–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
5. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å

## üõ†Ô∏è –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ pg_dump (–î–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- PostgreSQL –∫–ª–∏–µ–Ω—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ
- –î–æ—Å—Ç—É–ø –∫ connection strings –æ–±–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

### –ö–æ–º–∞–Ω–¥—ã:

```bash
# 1. –ü–æ–ª—É—á–∏—Ç–µ connection strings –∏–∑ Settings ‚Üí Database –≤ –æ–±–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö

# 2. –≠–∫—Å–ø–æ—Ä—Ç –∏–∑ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
pg_dump "postgresql://postgres:[PASSWORD]@db.qmbavgwkxtqudchuahdv.supabase.co:5432/postgres" \
  --no-owner --no-privileges --clean --if-exists \
  > production_backup.sql

# 3. –ò–º–ø–æ—Ä—Ç –≤ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ä–µ–¥—É
psql "postgresql://postgres:[PASSWORD]@db.ruuseponrzonvyyqpdsc.supabase.co:5432/postgres" \
  < production_backup.sql
```

## üîß –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ SQL —Å–∫—Ä–∏–ø—Ç—ã (–†—É—á–Ω–æ–π)

–ï—Å–ª–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–ø–æ—Å–æ–±—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç, –º–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤—Ä—É—á–Ω—É—é:

### –®–∞–≥ 1: –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ **–ø—Ä–æ–¥–∞–∫—à–µ–Ω –ø—Ä–æ–µ–∫—Ç–µ**:

```sql
-- –ü–æ–ª—É—á–∏—Ç—å DDL –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
SELECT 
    'CREATE TABLE ' || schemaname || '.' || tablename || ' (' ||
    string_agg(
        column_name || ' ' || data_type ||
        CASE 
            WHEN character_maximum_length IS NOT NULL 
            THEN '(' || character_maximum_length || ')'
            ELSE ''
        END ||
        CASE 
            WHEN is_nullable = 'NO' THEN ' NOT NULL'
            ELSE ''
        END ||
        CASE 
            WHEN column_default IS NOT NULL 
            THEN ' DEFAULT ' || column_default
            ELSE ''
        END,
        ', '
    ) || ');' as create_statement
FROM information_schema.tables t
JOIN information_schema.columns c ON c.table_name = t.tablename
WHERE t.schemaname = 'public' 
  AND t.tablename IN ('users', 'orders', 'applicants', 'notifications', 'scheduled_reminders', 'reviews', 'review_moderation', 'call_logs', 'pending_ratings', 'admin_users', 'admin_sessions')
GROUP BY schemaname, tablename;
```

### –®–∞–≥ 2: –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

```sql
-- –≠–∫—Å–ø–æ—Ä—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–±–µ–∑ –ø–∞—Ä–æ–ª–µ–π –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
COPY (
    SELECT id, phone, first_name, last_name, middle_name, birth_date, role, profile_image, city, preferred_language, created_at, updated_at 
    FROM users 
    LIMIT 100  -- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª—è —Ç–µ—Å—Ç–æ–≤
) TO STDOUT WITH CSV HEADER;

-- –≠–∫—Å–ø–æ—Ä—Ç –∑–∞–∫–∞–∑–æ–≤ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 50)
COPY (
    SELECT * FROM orders 
    ORDER BY created_at DESC 
    LIMIT 50
) TO STDOUT WITH CSV HEADER;

-- –≠–∫—Å–ø–æ—Ä—Ç –∑–∞—è–≤–æ–∫
COPY (
    SELECT * FROM applicants 
    WHERE created_at > NOW() - INTERVAL '30 days'
) TO STDOUT WITH CSV HEADER;
```

## ü§ñ –°–ø–æ—Å–æ–± 4: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç

–°–æ–∑–¥–∞–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞.

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ß—Ç–æ –Ω—É–∂–Ω–æ —É—á–µ—Å—Ç—å –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏:

1. **–ü–∞—Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: –ù–µ –∫–æ–ø–∏—Ä—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –≤ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ä–µ–¥—É
2. **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∞–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏—é —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ –∏ –∏–º–µ–Ω
3. **–§–∞–π–ª—ã –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**: Supabase Storage –Ω—É–∂–Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ
4. **RLS –ø–æ–ª–∏—Ç–∏–∫–∏**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã
5. **–§—É–Ω–∫—Ü–∏–∏ –∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–∞–Ω–Ω—ã–º –¥–ª—è —Ç–µ—Å—Ç–æ–≤:

```sql
-- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤–º–µ—Å—Ç–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö
INSERT INTO users (phone, first_name, last_name, birth_date, role, city, preferred_language) VALUES
('+998901111111', '–¢–µ—Å—Ç', '–ó–∞–∫–∞–∑—á–∏–∫', '1990-01-01', 'customer', '–¢–∞—à–∫–µ–Ω—Ç', 'ru'),
('+998902222222', '–¢–µ—Å—Ç', '–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å', '1985-05-15', 'worker', '–¢–∞—à–∫–µ–Ω—Ç', 'uz'),
('+998903333333', '–ê–¥–º–∏–Ω', '–¢–µ—Å—Ç–æ–≤—ã–π', '1980-12-25', 'customer', '–¢–∞—à–∫–µ–Ω—Ç', 'ru');

-- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤
INSERT INTO orders (title, description, category, location, budget, workers_needed, service_date, customer_id, status) VALUES
('–¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑ 1', '–û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞', '–£–±–æ—Ä–∫–∞', '–¢–∞—à–∫–µ–Ω—Ç, –ú–∏—Ä–∞–±–∞–¥', 50000, 1, '2024-02-01', (SELECT id FROM users WHERE phone = '+998901111111'), 'new'),
('–¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑ 2', '–ï—â–µ –æ–¥–∏–Ω —Ç–µ—Å—Ç', '–†–µ–º–æ–Ω—Ç', '–¢–∞—à–∫–µ–Ω—Ç, –Æ–Ω—É—Å–∞–±–∞–¥', 100000, 2, '2024-02-02', (SELECT id FROM users WHERE phone = '+998901111111'), 'in_progress');
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

–ü–æ—Å–ª–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π
SELECT 
    'users' as table_name, COUNT(*) as count FROM users
UNION ALL
SELECT 
    'orders' as table_name, COUNT(*) as count FROM orders
UNION ALL
SELECT 
    'applicants' as table_name, COUNT(*) as count FROM applicants
UNION ALL
SELECT 
    'notifications' as table_name, COUNT(*) as count FROM notifications;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü
SELECT table_name, column_name, data_type, is_nullable
FROM information_schema.columns 
WHERE table_schema = 'public' 
  AND table_name IN ('users', 'orders', 'applicants', 'notifications')
ORDER BY table_name, ordinal_position;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ RLS –ø–æ–ª–∏—Ç–∏–∫
SELECT schemaname, tablename, policyname, permissive, roles, cmd, qual
FROM pg_policies 
WHERE schemaname = 'public';
```

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

1. **–ê–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤**:
```sql
UPDATE users SET phone = '+99890' || LPAD((ROW_NUMBER() OVER())::text, 7, '0');
```

2. **–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª–µ–π** (–µ—Å–ª–∏ –µ—Å—Ç—å):
```sql
UPDATE users SET password_hash = NULL;
```

3. **–û—á–∏—Å—Ç–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**:
```sql
UPDATE users SET 
    first_name = '–¢–µ—Å—Ç' || id::text,
    last_name = '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å',
    middle_name = NULL,
    profile_image = NULL;
```

## üîÑ –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥—ã

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª—è—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ä–µ–¥—É:
- **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ** - –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **–ü–µ—Ä–µ–¥ –∫—Ä—É–ø–Ω—ã–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏** - –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
- **–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ö–µ–º—ã –ë–î** - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Supabase Dashboard
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ connection strings
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Supabase

---

**–°–æ–∑–¥–∞–Ω–æ:** $(date)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
