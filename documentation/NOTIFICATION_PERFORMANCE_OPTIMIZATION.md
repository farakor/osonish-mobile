# üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## üìä –ü—Ä–æ–±–ª–µ–º–∞ (–î–û –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)

### ‚ùå –°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥:
- **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞**: –∫–∞–∂–¥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ—Ç–¥–µ–ª—å–Ω–æ
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î**: —è–∑—ã–∫, —Ç–æ–∫–µ–Ω—ã, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ú–µ–¥–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: ~500-1000–º—Å –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ë–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**: –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–µ

### üìà –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π):
```
–°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥: 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π √ó 800–º—Å = 80 —Å–µ–∫—É–Ω–¥! üò±
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ (–ü–û–°–õ–ï –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)

### üöÄ –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥:

#### 1. **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —è–∑—ã–∫–∞–º**
```typescript
// –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
const usersByLanguage = new Map<string, {
  userIds: string[],
  title: string,
  body: string
}>();
```

#### 2. **–ü–∞–∫–µ—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î**
```sql
-- –í–º–µ—Å—Ç–æ 100 –∑–∞–ø—Ä–æ—Å–æ–≤ - –≤—Å–µ–≥–æ 3 –∑–∞–ø—Ä–æ—Å–∞:
SELECT * FROM users WHERE role = 'worker';                    -- 1 –∑–∞–ø—Ä–æ—Å
SELECT * FROM push_tokens WHERE user_id IN (...);            -- 1 –∑–∞–ø—Ä–æ—Å  
SELECT * FROM user_notification_settings WHERE user_id IN (...); -- 1 –∑–∞–ø—Ä–æ—Å
```

#### 3. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞**
```typescript
// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤—Å–µ —è–∑—ã–∫–æ–≤—ã–µ –≥—Ä—É–ø–ø—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
const batchPromises = Array.from(usersByLanguage.values()).map(async (group) => {
  return await notificationService.sendNotificationToUsers(group.userIds, ...);
});

await Promise.allSettled(batchPromises);
```

#### 4. **–ü–∞–∫–µ—Ç–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Expo API**
```typescript
// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–æ 100 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –æ–¥–Ω–æ–º HTTP –∑–∞–ø—Ä–æ—Å–µ
const batchMessages = tokens.map(token => ({
  to: token,
  title,
  body,
  data
}));

await fetch('https://exp.host/--/api/v2/push/send', {
  method: 'POST',
  body: JSON.stringify(batchMessages) // –ú–∞—Å—Å–∏–≤ —Å–æ–æ–±—â–µ–Ω–∏–π!
});
```

## üìà –£–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### ‚ö° –ù–æ–≤–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π):

| –≠—Ç–∞–ø | –°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ | –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ | –£–ª—É—á—à–µ–Ω–∏–µ |
|------|---------------|--------------|-----------|
| **–ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π** | 100–º—Å | 50–º—Å | 2x –±—ã—Å—Ç—Ä–µ–µ |
| **–ü–æ–ª—É—á–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤** | 100 √ó 50–º—Å = 5—Å | 100–º—Å | **50x –±—ã—Å—Ç—Ä–µ–µ** |
| **–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤** | 100 √ó 100–º—Å = 10—Å | 200–º—Å | **50x –±—ã—Å—Ç—Ä–µ–µ** |
| **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫** | 100 √ó 80–º—Å = 8—Å | 150–º—Å | **53x –±—ã—Å—Ç—Ä–µ–µ** |
| **–û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** | 100 √ó 500–º—Å = 50—Å | 2-3—Å | **17-25x –±—ã—Å—Ç—Ä–µ–µ** |
| **–ò–¢–û–ì–û** | **~73 —Å–µ–∫—É–Ω–¥—ã** | **~3 —Å–µ–∫—É–Ω–¥—ã** | **üî• 24x –±—ã—Å—Ç—Ä–µ–µ!** |

### üéØ –ö–ª—é—á–µ–≤—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

1. **–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤**: —Å 100+ –¥–æ 2-3 –∑–∞–ø—Ä–æ—Å–æ–≤
2. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –≤–º–µ—Å—Ç–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π
3. **–ü–∞–∫–µ—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î**: –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö
4. **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —è–∑—ã–∫–∞–º**: –∏–∑–±–µ–≥–∞–µ–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
5. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —è–∑—ã–∫–∞–º:
```typescript
// –ü—Ä–∏–º–µ—Ä: 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ‚Üí 2 –≥—Ä—É–ø–ø—ã
{
  "–ù–æ–≤—ã–π –∑–∞–∫–∞–∑!|–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä–∞ - 50000 —Å—É–º –≤ –¢–∞—à–∫–µ–Ω—Ç": {
    userIds: ["user1", "user2", ...], // 70 —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã—Ö
    title: "–ù–æ–≤—ã–π –∑–∞–∫–∞–∑!",
    body: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä–∞ - 50000 —Å—É–º –≤ –¢–∞—à–∫–µ–Ω—Ç"
  },
  "Yangi buyurtma!|Konditsioner o'rnatish - 50000 so'm Toshkent": {
    userIds: ["user71", "user72", ...], // 30 —É–∑–±–µ–∫–æ—è–∑—ã—á–Ω—ã—Ö  
    title: "Yangi buyurtma!",
    body: "Konditsioner o'rnatish - 50000 so'm Toshkent"
  }
}
```

### –ü–∞–∫–µ—Ç–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞:
```typescript
// –†–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ –±–∞—Ç—á–∏ –ø–æ 100 —Ç–æ–∫–µ–Ω–æ–≤ (–ª–∏–º–∏—Ç FCM/Expo)
const batchSize = 100;
const batches = [];
for (let i = 0; i < tokens.length; i += batchSize) {
  batches.push(tokens.slice(i, i + batchSize));
}

// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤—Å–µ –±–∞—Ç—á–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
const results = await Promise.allSettled(
  batches.map(batch => sendBatchNotifications(batch))
);
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ù–æ–≤—ã–µ –ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:
```
üöÄ [NotificationService] –ü–ê–ö–ï–¢–ù–ê–Ø –û–¢–ü–†–ê–í–ö–ê 100 –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø–ú
‚è±Ô∏è –¢–æ–∫–µ–Ω—ã –ø–æ–ª—É—á–µ–Ω—ã –∑–∞ 150–º—Å
‚è±Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—É—á–µ–Ω—ã –∑–∞ 100–º—Å  
üì¶ –†–∞–∑–±–∏—Ç–æ –Ω–∞ 1 –±–∞—Ç—á–µ–π –ø–æ 100 —Ç–æ–∫–µ–Ω–æ–≤
üöÄ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –±–∞—Ç—á 1/1 (100 —Ç–æ–∫–µ–Ω–æ–≤)
‚úÖ –ë–∞—Ç—á 1 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω: 100/100
‚ö° –ü–∞–∫–µ—Ç–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∑–∞ 2500–º—Å
üì§ –ò–¢–û–ì: –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ 100/100 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- **24x —É—Å–∫–æ—Ä–µ–Ω–∏–µ** –æ–±—â–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **50x —É—Å–∫–æ—Ä–µ–Ω–∏–µ** –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î  
- **17-25x —É—Å–∫–æ—Ä–µ–Ω–∏–µ** –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ª–µ–≥–∫–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç 1000+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –æ—à–∏–±–∫–∏ –≤ –æ–¥–Ω–æ–º –±–∞—Ç—á–µ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ
- **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ø–æ–ª–Ω–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞

### üöÄ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —ç—Ñ—Ñ–µ–∫—Ç:
- **–ë—ã—Å—Ç—Ä—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ—á—Ç–∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- **–ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä**: —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î –∏ API
- **–õ—É—á—à–∏–π UX**: –∑–∞–∫–∞–∑—á–∏–∫–∏ –≤–∏–¥—è—Ç –±—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–ª–∏–∫ —Å–∏—Å—Ç–µ–º—ã
- **–≠–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤**: –º–µ–Ω—å—à–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ CPU –∏ —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```javascript
// –¢–µ—Å—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
global.debugNotifications.testNewOrderNotifications();

// –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è  
global.debugNotifications.clearNotificationCache();
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ª–æ–≥–∏ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è - —Ç–µ–ø–µ—Ä—å –æ–Ω–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ª—É—á—à—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å! üéâ
