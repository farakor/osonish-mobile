# üîî –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Push –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –ü—Ä–æ–¥–∞–∫—à–µ–Ω–∞

## –û–±–∑–æ—Ä

–î–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Osonish –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ (App Store –∏ Google Play).

## ‚úÖ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

- ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–¥–∞ –≥–æ—Ç–æ–≤–∞
- ‚úÖ EAS –ø—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω (projectId: d25e6650-1e06-4ebb-8988-0085861affbf)
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞
- ‚úÖ –õ–æ–≥–∏–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

## üìã –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### Apple Developer Account
- **Apple ID**: –ê–∫–∫–∞—É–Ω—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ ($99/–≥–æ–¥)
- **Team ID**: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–æ–º–∞–Ω–¥—ã
- **Bundle Identifier**: com.yourcompany.osonish
- **APNs Key**: –ö–ª—é—á –¥–ª—è Apple Push Notification Service

### Google Play Console
- **Google Play Developer Account** ($25 –µ–¥–∏–Ω–æ—Ä–∞–∑–æ–≤–æ)
- **Package Name**: com.yourcompany.osonish
- **Firebase Project**: –î–ª—è FCM (Firebase Cloud Messaging)
- **Service Account Key**: JSON —Ñ–∞–π–ª –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

## üöÄ –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### 1.1 Apple Developer Account
```bash
# –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è Apple Developer Account:
# 1. –ó–∞–π–¥–∏—Ç–µ –≤ Apple Developer Console
# 2. –°–æ–∑–¥–∞–π—Ç–µ App ID —Å Bundle Identifier: com.yourcompany.osonish
# 3. –í–∫–ª—é—á–∏—Ç–µ Push Notifications capability
# 4. –°–æ–∑–¥–∞–π—Ç–µ APNs Key –≤ Certificates, Identifiers & Profiles
# 5. –°–∫–∞—á–∞–π—Ç–µ .p8 —Ñ–∞–π–ª –∫–ª—é—á–∞
```

#### 1.2 Google Play Console & Firebase
```bash
# –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è Google Play Console:
# 1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Google Play Console
# 2. –°–æ–∑–¥–∞–π—Ç–µ Firebase –ø—Ä–æ–µ–∫—Ç –Ω–∞ https://console.firebase.google.com
# 3. –î–æ–±–∞–≤—å—Ç–µ Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å package name: com.yourcompany.osonish
# 4. –°–∫–∞—á–∞–π—Ç–µ google-services.json
# 5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Service Account –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
```

### –≠—Ç–∞–ø 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ EAS Build

#### 2.1 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ app.json
```json
{
  "expo": {
    "name": "Osonish",
    "slug": "osonish-mobile",
    "version": "1.0.0",
    "orientation": "portrait",
    "icon": "./assets/icon.png",
    "userInterfaceStyle": "light",
    "owner": "farakor",
    "extra": {
      "eas": {
        "projectId": "d25e6650-1e06-4ebb-8988-0085861affbf"
      }
    },
    "splash": {
      "image": "./assets/splash-icon.png",
      "resizeMode": "contain",
      "backgroundColor": "#ffffff"
    },
    "notification": {
      "icon": "./assets/notification-icon.png",
      "color": "#000000"
    },
    "ios": {
      "supportsTablet": true,
      "bundleIdentifier": "com.yourcompany.osonish",
      "buildNumber": "1",
      "infoPlist": {
        "UIBackgroundModes": ["background-fetch", "remote-notification"]
      }
    },
    "android": {
      "package": "com.yourcompany.osonish",
      "versionCode": 1,
      "adaptiveIcon": {
        "foregroundImage": "./assets/adaptive-icon.png",
        "backgroundColor": "#ffffff"
      },
      "permissions": [
        "RECEIVE_BOOT_COMPLETED",
        "VIBRATE",
        "WAKE_LOCK",
        "com.google.android.c2dm.permission.RECEIVE"
      ],
      "useNextNotificationsApi": true,
      "googleServicesFile": "./google-services.json"
    },
    "web": {
      "favicon": "./assets/favicon.png"
    },
    "plugins": [
      [
        "expo-notifications",
        {
          "icon": "./assets/notification-icon.png",
          "color": "#ffffff",
          "defaultChannel": "default"
        }
      ]
    ]
  }
}
```

#### 2.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ eas.json
```json
{
  "cli": {
    "version": ">= 16.17.4",
    "appVersionSource": "remote"
  },
  "build": {
    "development": {
      "developmentClient": true,
      "distribution": "internal"
    },
    "preview": {
      "distribution": "internal",
      "ios": {
        "simulator": true
      }
    },
    "production": {
      "autoIncrement": true,
      "ios": {
        "buildConfiguration": "Release"
      },
      "android": {
        "buildType": "apk"
      }
    }
  },
  "submit": {
    "production": {
      "ios": {
        "appleId": "your-apple-id@example.com",
        "ascAppId": "your-app-store-connect-app-id",
        "appleTeamId": "YOUR_TEAM_ID"
      },
      "android": {
        "serviceAccountKeyPath": "./google-service-account.json",
        "track": "production"
      }
    }
  }
}
```

### –≠—Ç–∞–ø 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

#### 3.1 iOS (APNs)
```bash
# 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ iOS credentials
eas credentials:configure --platform=ios

# 2. –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –≤—ã–±–µ—Ä–∏—Ç–µ:
#    - Use existing Apple ID
#    - Upload existing Push Notification key (.p8 —Ñ–∞–π–ª)
#    - –í–≤–µ–¥–∏—Ç–µ Key ID –∏ Team ID

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
eas credentials:list --platform=ios
```

#### 3.2 Android (FCM)
```bash
# 1. –ü–æ–º–µ—Å—Ç–∏—Ç–µ google-services.json –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
cp ~/Downloads/google-services.json ./

# 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Android credentials
eas credentials:configure --platform=android

# 3. –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –≤—ã–±–µ—Ä–∏—Ç–µ:
#    - Generate new Android Keystore
#    - –ò–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π keystore

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
eas credentials:list --platform=android
```

### –≠—Ç–∞–ø 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### 4.1 Preview –±–∏–ª–¥—ã
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –±–∏–ª–¥–æ–≤
eas build --platform all --profile preview

# –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –±–∏–ª–¥–∞:
# - iOS: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —á–µ—Ä–µ–∑ TestFlight –∏–ª–∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ Ad Hoc
# - Android: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ APK –Ω–∞–ø—Ä—è–º—É—é
```

#### 4.2 –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] Push —Ç–æ–∫–µ–Ω —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–∞—Ö –ø—Ä–∏—Ö–æ–¥—è—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –æ—Ç–∫–ª–∏–∫–∞—Ö –ø—Ä–∏—Ö–æ–¥—è—Ç –∑–∞–∫–∞–∑—á–∏–∫–∞–º
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤—ã–±–æ—Ä–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

### –≠—Ç–∞–ø 5: –ü—Ä–æ–¥–∞–∫—à–µ–Ω

#### 5.1 –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥–∞–∫—à–µ–Ω –±–∏–ª–¥–æ–≤
```bash
# iOS –±–∏–ª–¥
eas build --platform ios --profile production

# Android –±–∏–ª–¥
eas build --platform android --profile production

# –ò–ª–∏ –æ–±–∞ —Å—Ä–∞–∑—É
eas build --platform all --profile production
```

#### 5.2 –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ –º–∞–≥–∞–∑–∏–Ω—ã
```bash
# App Store
eas submit --platform ios --profile production

# Google Play
eas submit --platform android --profile production
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### –õ–∏–º–∏—Ç—ã Expo Push Service
- **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ**: 1,000 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π/–º–µ—Å—è—Ü
- **Pro Plan**: –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ ($29/–º–µ—Å—è—Ü)

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ - –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π Push Server
–ï—Å–ª–∏ –ø—Ä–µ–≤—ã—à–∞–µ—Ç–µ –ª–∏–º–∏—Ç—ã Expo, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ push —Å–µ—Ä–≤–µ—Ä–∞:

```typescript
// –ó–∞–º–µ–Ω–∏—Ç–µ –≤ notificationService.ts —Ñ—É–Ω–∫—Ü–∏—é sendPushNotification
private async sendPushNotification(
  token: string,
  title: string,
  body: string,
  data: any = {}
): Promise<void> {
  try {
    // –í–º–µ—Å—Ç–æ Expo push service
    const response = await fetch('YOUR_CUSTOM_PUSH_SERVER/send', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer YOUR_SERVER_TOKEN'
      },
      body: JSON.stringify({
        token,
        title,
        body,
        data,
        platform: Platform.OS
      }),
    });

    if (!response.ok) {
      throw new Error(`Push notification failed: ${response.statusText}`);
    }

    console.log('[NotificationService] ‚úÖ Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä');
  } catch (error) {
    console.error('[NotificationService] ‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ—Ä–µ–∑ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä:', error);
    throw error;
  }
}
```

## üìÅ –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å —ç—Ç–∏ —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π:

### iOS
- [ ] APNs Key (.p8 —Ñ–∞–π–ª)
- [ ] App Store Connect App ID
- [ ] Apple Team ID

### Android
- [ ] google-services.json
- [ ] google-service-account.json (–¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏)
- [ ] Android Keystore —Ñ–∞–π–ª

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

### Analytics push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
–î–æ–±–∞–≤—å—Ç–µ —Ç—Ä–µ–∫–∏–Ω–≥ –≤ `notificationService.ts`:

```typescript
// –î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ—É–Ω–∫—Ü–∏—é logNotification
private async logNotification(
  userId: string,
  title: string,
  body: string,
  data: any,
  notificationType: PushNotificationData['notificationType']
): Promise<void> {
  try {
    const { error } = await supabase
      .from('notification_logs')
      .insert({
        user_id: userId,
        title,
        body,
        data,
        notification_type: notificationType,
        status: 'sent',
        // –î–æ–±–∞–≤—å—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
        platform: Platform.OS,
        app_version: Constants.expoConfig?.version,
        sent_at: new Date().toISOString()
      });

    if (error) {
      console.error('[NotificationService] ‚ùå –û—à–∏–±–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:', error);
    }
  } catch (error) {
    console.error('[NotificationService] ‚ùå –û—à–∏–±–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:', error);
  }
}
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. **Expo Documentation**: https://docs.expo.dev/push-notifications/
2. **EAS Build Docs**: https://docs.expo.dev/build/introduction/
3. **Firebase Console**: https://console.firebase.google.com
4. **Apple Developer**: https://developer.apple.com

## üìÖ –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

- [ ] Apple Developer Account –∞–∫—Ç–∏–≤–µ–Ω
- [ ] Google Play Console –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Firebase –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω
- [ ] APNs –∫–ª—é—á–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] FCM –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] google-services.json –¥–æ–±–∞–≤–ª–µ–Ω
- [ ] Bundle/Package identifiers —Å–æ–≤–ø–∞–¥–∞—é—Ç
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –ø—Ä–æ–π–¥–µ–Ω–æ
- [ ] –í—Å–µ —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: $(date)  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞**: 1.0  
**–ê–≤—Ç–æ—Ä**: Development Team